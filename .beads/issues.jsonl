{"id":"symbology-001","title":"Add 'only running' option to cli pipeline status'\n","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T22:26:57.092087068Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:26:57.092087068Z"}
{"id":"symbology-00n","title":"User Accounts \u0026 Authentication","description":"Add user authentication and account management. Foundation for personalization, saved state, and monetization. Includes: user registration and login (email/password, OAuth), session management (JWT or session cookies), user profile page, password reset flow, API authentication middleware.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:49.309883685Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:49.309883685Z","dependencies":[{"issue_id":"symbology-00n","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:14.248564875Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-00n","depends_on_id":"symbology-7nv","type":"blocks","created_at":"2026-02-05T21:04:39.897133024Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-00n","depends_on_id":"symbology-6k4","type":"blocks","created_at":"2026-02-05T21:04:39.945734056Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-0ra","title":"Downgrade single summaries from Sonnet to Haiku","description":"Change single_summary model in PIPELINE_MODEL_CONFIGS from claude-sonnet-4-5-20250929 to claude-haiku-4-5-20251001. Before switching, run a side-by-side comparison: generate Haiku single summaries for 1-2 companies and diff against existing Sonnet outputs. If quality is acceptable, ship the change. Est. savings: ~10x cost reduction on ~80% of LLM calls. Files: server/symbology/worker/pipeline.py (L17-21)","status":"closed","priority":0,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:52.397472912Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:05:44.32322155Z","closed_at":"2026-02-06T22:05:44.32322155Z","close_reason":"Closed"}
{"id":"symbology-2jq","title":"Tier 4: Infrastructure \u0026 Hardening","status":"open","priority":2,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:07.901525209Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:07.901525209Z"}
{"id":"symbology-2rd","title":"Redis Caching Layer","description":"Add Redis for caching frequently accessed data to reduce database load. Includes: Redis service in docker-compose, cache decorator/middleware for API routes, cache company search results, cache generated content by hash, cache invalidation strategy, cache hit/miss metrics.","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:13.337094212Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:13.337094212Z","dependencies":[{"issue_id":"symbology-2rd","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:45.182124792Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-3zd","title":"Observability \u0026 Monitoring","description":"Add metrics, tracing, and monitoring for production reliability. Includes: Prometheus metrics endpoint, request latency and error rate metrics, database query performance metrics, LLM generation latency and token usage metrics, Grafana dashboard updates (dashboard.json already exists), health check improvements, alerting rules for critical failures.","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:27.715080652Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:27.715080652Z","dependencies":[{"issue_id":"symbology-3zd","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:52.34793099Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-42o","title":"Tier 2: User Experience \u0026 Engagement","status":"open","priority":2,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:46.87445442Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:46.87445442Z"}
{"id":"symbology-4qk","title":"Earnings Call Transcript Analysis","description":"Extend data sources beyond SEC filings to include earnings call transcripts. Includes: earnings call transcript ingestion pipeline, AI-generated summaries of management commentary, sentiment analysis of Q\u0026A sections, cross-reference with filing disclosures for consistency checking.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:06.720044117Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:06.720044117Z","dependencies":[{"issue_id":"symbology-4qk","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:36.761421658Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-537","title":"Tier 1: Core Product Value","status":"open","priority":1,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:37.140985184Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:37.140985184Z"}
{"id":"symbology-5p7","title":"Filing Diff \u0026 Change Tracking","description":"Highlight what changed between successive filings for the same company — one of the most valuable features for analysts. Includes: diff view showing added/removed/changed sections between filings, AI-generated summary of material changes, change severity scoring, historical change timeline for a company.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:57.888654099Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:57.888654099Z","dependencies":[{"issue_id":"symbology-5p7","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:19.831870087Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-65c","title":"Tiered Access \u0026 API Keys","description":"Implement usage-based access tiers to monetize the platform. Includes: free tier with rate limits and limited companies, paid tier(s) with higher limits and premium features, API key generation and management, usage tracking and billing integration, developer API documentation portal.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:58.93159236Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:58.93159236Z","dependencies":[{"issue_id":"symbology-65c","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:29.372961826Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-65c","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.993354949Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-6k4","title":"Financial Data Visualizations","description":"Surface the XBRL financial data already being extracted as interactive charts and graphs. The database already has financial_concepts and financial_values tables plus LayerChart is installed in the frontend. Includes: revenue/income/margin trend charts, balance sheet visualizations, key financial metric cards on company pages, comparative financial charts across companies.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:54.777564286Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:54.777564286Z","dependencies":[{"issue_id":"symbology-6k4","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:17.986995579Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-6k4","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:04:39.847226495Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-7nv","title":"Improved Search \u0026 Discovery","description":"Replace basic LIKE queries with full-text search across filings and generated content. Includes: PostgreSQL full-text search or Elasticsearch integration, search across company names/tickers/filings/generated content, filter by sector (SIC code), form type, date range, and document type, search result ranking and relevance scoring.","status":"open","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:46.33711807Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:46.33711807Z","dependencies":[{"issue_id":"symbology-7nv","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:08.98943157Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-7nv","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:04:39.794961941Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-8eb","title":"Track input/output tokens from API response","description":"The Anthropic API returns message.usage.input_tokens and message.usage.output_tokens — we currently ignore these. Steps: (1) Update AnthropicResponseAdapter to capture input_tokens and output_tokens from API response, (2) Add input_tokens and output_tokens columns to generated_content table (new Alembic migration), (3) Store token counts alongside each generated content record, (4) Add a CLI command or API endpoint to report token usage per pipeline run. Enables data-driven optimization and cost attribution per pipeline stage. Files: server/symbology/llm/client.py (L16-24), server/symbology/database/generated_content.py","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:51.289903651Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:40:35.147112072Z","closed_at":"2026-02-06T22:40:35.147112072Z","close_reason":"Added input_tokens/output_tokens to AnthropicResponseAdapter, GeneratedContent model, Alembic migration, handlers, and CLI output"}
{"id":"symbology-8f5","title":"Tier 3: Monetization \u0026 Scale","status":"open","priority":3,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:56.43241738Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:56.43241738Z"}
{"id":"symbology-9a3","title":"Replace Ollama with Claude (Anthropic) API","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-06T03:18:54.540599474Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T03:29:29.446228538Z","closed_at":"2026-02-06T03:29:29.446228538Z","close_reason":"Replaced Ollama with Anthropic Claude API across all 10 files. All 137 tests pass."}
{"id":"symbology-ad2","title":"Diff-based pipeline: skip unchanged sections, diff-summarize the rest","description":"Use raw source document diffs across filing periods to both reduce and eliminate LLM calls. Since SEC filings have high YoY textual overlap, diffing the raw text (post-normalization) enables two optimizations in one:\n\n1. **Skip unchanged sections entirely** — If a section (e.g. controls_procedures) is identical or near-identical across periods, skip the Haiku call and reuse the prior summary. This replaces the need for a separate complexity router (symbology-pxz).\n\n2. **Diff-based single summaries** — For sections that did change, send Haiku the most recent filing's full text + structured diffs for prior periods instead of full text for every period. Reduces Haiku input tokens at the highest-volume pipeline stage.\n\nSteps:\n(1) Implement text diff utility for raw filing documents across periods (character-level or line-level similarity score + human-readable diff)\n(2) Add similarity threshold — below threshold, reuse prior summary; above threshold, generate with diff-formatted input\n(3) Make thresholds configurable per document type (controls_procedures can have a high reuse threshold since it's typically formulaic)\n(4) Update single-summary prompts to handle diff-formatted input\n(5) Compare output quality and token savings against current full-text approach\n\nPrerequisite: symbology-qyh (normalized text makes diffing reliable).\nFiles: server/symbology/llm/prompts.py, server/symbology/worker/handlers.py, server/symbology/worker/pipeline.py","status":"open","priority":4,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-06T21:39:06.373378796Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:00:13.276481663Z","dependencies":[{"issue_id":"symbology-ad2","depends_on_id":"symbology-8eb","type":"blocks","created_at":"2026-02-06T21:43:29.449932941Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ad2","depends_on_id":"symbology-qyh","type":"blocks","created_at":"2026-02-06T22:57:10.844015905Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-afp","title":"Lower temperature for factual extraction","description":"Current default is temperature: 0.8 across all stages — too high for deterministic factual extraction. Change to: single summaries 0.2, aggregate summaries 0.3, frontpage summaries 0.3. Est. savings: indirect (better outputs, less variance, fewer retries). Files: server/symbology/worker/pipeline.py, server/symbology/utils/config.py","status":"closed","priority":0,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:55.435631026Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:05:44.33045808Z","closed_at":"2026-02-06T22:05:44.33045808Z","close_reason":"Closed"}
{"id":"symbology-ahh","title":"Pipeline monitoring API, CLI, and alerting","status":"closed","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-06T02:20:34.94319809Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T02:24:58.682260489Z","closed_at":"2026-02-06T02:24:58.682260489Z","close_reason":"Implemented pipeline monitoring API (4 routes), CLI commands (status/trigger/runs), alerts module with webhook dispatch, and 29 new tests"}
{"id":"symbology-bdx","title":"Comparative Analysis","description":"Enable side-by-side comparison of AI-generated insights across companies, sectors, or time periods. Includes: company-vs-company comparison view, temporal comparison (same company across filing periods), sector-level aggregation of common themes and risks.","status":"open","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:43.878894155Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:43.878894155Z","dependencies":[{"issue_id":"symbology-bdx","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:06.648195251Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-byj","title":"Background Job Queue","description":"Implement async job processing for long-running tasks like ingestion and content generation. Includes: job queue infrastructure (Celery, or arq, or similar), worker processes for ingestion and LLM generation, job status tracking and reporting, retry logic with dead letter queue, admin UI or CLI for job management.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:24.299973902Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T00:22:22.664373353Z","closed_at":"2026-02-06T00:22:22.664373353Z","close_reason":"Implemented full background job queue: PostgreSQL-native queue with SELECT FOR UPDATE SKIP LOCKED, worker process with signal handling, API endpoints, CLI commands, real job handlers for ingestion/content-generation, deployment config. 47 new tests, all 227 pass.","dependencies":[{"issue_id":"symbology-byj","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:50.692945124Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-byj","depends_on_id":"symbology-dun","type":"blocks","created_at":"2026-02-05T21:04:39.741954389Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-d0c","title":"Fix typos in prompts","description":"Two prompt files have typos: (1) controls_procedures/prompt.md: 'procedutres' -\u003e 'procedures', 'they key componets' -\u003e 'the key components'. (2) management_discussion/prompt.md: trailing ' a' on last line. Files: server/prompts/controls_procedures/prompt.md, server/prompts/management_discussion/prompt.md","status":"closed","priority":2,"issue_type":"bug","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:59.952808779Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:45:36.818055795Z","closed_at":"2026-02-06T22:45:36.818055795Z","close_reason":"Closed"}
{"id":"symbology-dun","title":"Alembic Database Migrations","description":"Replace SQLAlchemy create_all() with Alembic migration framework. Required before any schema changes can be safely deployed. Includes: initialize Alembic config, generate initial migration from current schema, migration for all existing tables, CI check that migrations are up to date, documentation on creating new migrations.","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:11.308364316Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T22:40:48.012104713Z","closed_at":"2026-02-05T22:40:48.012104713Z","close_reason":"Alembic initialized with initial migration, create_all() removed, justfile recipes added, 180 tests passing","dependencies":[{"issue_id":"symbology-dun","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:43.170934416Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx","title":"Automated Data Pipeline","description":"Automate ingestion of new SEC filings as they appear on EDGAR, replacing the current manual CLI-driven process. Includes: scheduled polling of EDGAR for new filings, automatic document extraction and LLM content generation, background job queue for async processing, monitoring and alerting for pipeline failures.","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:50.022106994Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T02:58:42.146879478Z","closed_at":"2026-02-06T02:58:42.146879478Z","close_reason":"All subtasks complete: orchestration, job handler, run tracking, scheduler, monitoring, and justfile/compose wiring","dependencies":[{"issue_id":"symbology-ehx","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:13.81633473Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:01:40.144683247Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.1","title":"Pipeline orchestration helpers","description":"Create server/symbology/worker/pipeline.py with shared utilities: ensure_model_config(name, num_ctx) to create-or-return ModelConfig, ensure_prompt(prompt_name) to load from prompts/ dir and create-or-return Prompt. These replace the CLI model-configs create / prompts create calls used in ingest.just.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:37:51.615325046Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T01:00:55.738132957Z","closed_at":"2026-02-06T01:00:55.738132957Z","close_reason":"Closed","dependencies":[{"issue_id":"symbology-ehx.1","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:37:51.616514128Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.2","title":"FULL_PIPELINE job type, handler, and migration","description":"Add FULL_PIPELINE to JobType enum in database/jobs.py. Add handle_full_pipeline handler in worker/handlers.py that orchestrates the full ingest.just logic in Python: (1) company ingestion, (2) filing ingestion with documents, (3) for each document_type x accession_number create single summary via CONTENT_GENERATION, (4) aggregate summary from all singles, (5) frontpage summary from aggregate. Uses pipeline helpers for model config/prompt resolution. Params: {ticker, forms, count, document_types}. Add Alembic migration to extend job_type_enum.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:37:55.247852543Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T01:27:34.610149381Z","closed_at":"2026-02-06T01:27:34.610149381Z","close_reason":"Closed","dependencies":[{"issue_id":"symbology-ehx.2","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:37:55.253760156Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.2","depends_on_id":"symbology-ehx.1","type":"blocks","created_at":"2026-02-06T00:38:10.097233183Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.3","title":"Pipeline run tracking model","description":"Create server/symbology/database/pipeline_runs.py with PipelineRun model: id (uuid7), company_id (FK), trigger (MANUAL/SCHEDULED enum), status (PENDING/RUNNING/COMPLETED/FAILED/PARTIAL enum), forms (ARRAY[str]), started_at, completed_at, error (Text), jobs_created (int), jobs_completed (int), jobs_failed (int), metadata (JSON). Add CRUD functions. Add Alembic migration. Integrate with FULL_PIPELINE handler: create PipelineRun at start, update on completion/failure, track partial success.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:37:57.720130018Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T01:40:59.455157363Z","closed_at":"2026-02-06T01:40:59.455157363Z","close_reason":"Closed","dependencies":[{"issue_id":"symbology-ehx.3","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:37:57.721343964Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.4","title":"Scheduler module with EDGAR polling","description":"Create server/symbology/scheduler/ package: (1) config.py - SchedulerSettings (pydantic-settings, env prefix SCHEDULER_): poll_interval (default 21600s/6hr), enabled_forms (default [10-K, 10-Q]), filing_lookback_days (default 30). (2) polling.py - check_company_for_new_filings(ticker, forms, lookback_days) queries EDGAR and compares accession numbers vs DB; poll_all_companies() iterates all companies and enqueues FULL_PIPELINE jobs for those with new filings. (3) main.py - long-lived process with graceful shutdown (SIGTERM/SIGINT), periodic poll loop with time.sleep, stale run detection. Same pattern as worker/main.py.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:38:01.444248778Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T01:52:57.454437454Z","closed_at":"2026-02-06T01:52:57.454437454Z","close_reason":"Closed","dependencies":[{"issue_id":"symbology-ehx.4","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:38:01.445327833Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.4","depends_on_id":"symbology-ehx.2","type":"blocks","created_at":"2026-02-06T00:38:10.152126479Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.5","title":"Monitoring API, CLI, and alerting","description":"API routes (server/symbology/api/routes/pipeline.py): GET /pipeline/runs (list with filters), GET /pipeline/runs/{id} (detail with linked jobs), GET /pipeline/status (dashboard: last run per company, failures, next poll), POST /pipeline/trigger/{ticker} (manual trigger). CLI commands (server/symbology/cli/pipeline.py): pipeline status, pipeline trigger TICKER, pipeline runs. Failure alerting (server/symbology/scheduler/alerts.py): detect consecutive failures per company, stale RUNNING runs; alert via structured log events; optional webhook URL config for Slack/Discord.","design":"## Implementation Plan\n\n### New Files\n- api/routes/pipeline.py — 4 API routes (list runs, get run, status dashboard, manual trigger)\n- cli/pipeline.py — CLI commands (pipeline status, trigger, runs)\n- scheduler/alerts.py — Alert detection + webhook dispatch\n- Tests for all three\n\n### Modified Files\n- schemas.py — PipelineRunResponse, PipelineStatusResponse, CompanyPipelineStatus, PipelineTriggerRequest\n- routes/__init__.py — Register /pipeline router\n- main.py (api) — Add pipeline openapi tag\n- main.py (cli) — Register pipeline command group\n- pipeline_runs.py — Add get_latest_run_per_company(), count_consecutive_failures()\n- scheduler/config.py — Add alert thresholds + webhook settings (SCHEDULER_ prefix)\n- scheduler/main.py — Replace _detect_stale_runs() with check_alerts()\n\n### Logging Convention\n- snake_case event names, structured kwargs\n- Bounded cardinality: counts not lists, error_type not error_message, url_host not full URL\n- Events: alert_consecutive_failures, alert_stale_run, alert_webhook_sent, api_trigger_pipeline, etc.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:38:04.196031622Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T02:36:45.624114785Z","closed_at":"2026-02-06T02:36:45.624114785Z","close_reason":"Work already committed in 26a2fc7","dependencies":[{"issue_id":"symbology-ehx.5","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:38:04.196943195Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.5","depends_on_id":"symbology-ehx.3","type":"blocks","created_at":"2026-02-06T00:38:10.202559124Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.5","depends_on_id":"symbology-ehx.4","type":"blocks","created_at":"2026-02-06T00:38:10.255656506Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.6","title":"Justfile and Docker compose wiring","description":"Add scheduler recipe to server/justfile: uv run -m symbology.scheduler.main. Add scheduler delegation to root justfile. Add pipeline trigger TICKER recipe. Add scheduler service to symbology-compose.yaml alongside api and worker. Register pipeline router in api/main.py, register pipeline CLI group in cli/main.py.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:38:06.188890476Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T02:50:21.569835326Z","closed_at":"2026-02-06T02:50:21.569835326Z","close_reason":"Added run-scheduler and run-pipeline-trigger recipes to root justfile, added symbology-scheduler service to docker compose","dependencies":[{"issue_id":"symbology-ehx.6","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:38:06.18982982Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.6","depends_on_id":"symbology-ehx.4","type":"blocks","created_at":"2026-02-06T00:38:10.310055769Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.6","depends_on_id":"symbology-ehx.5","type":"blocks","created_at":"2026-02-06T00:38:10.367670557Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-etp","title":"Interactive Q\u0026A on Filings","description":"Allow users to ask natural language questions about a company's filings and get AI-generated answers grounded in the source documents. Includes: chat-style interface on company pages, RAG pipeline to retrieve relevant document sections, source attribution with links to original filing text, conversation history per company.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:51.652332004Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:51.652332004Z","dependencies":[{"issue_id":"symbology-etp","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:16.150459854Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-etp","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.83648374Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-fet","title":"Cloud LLM Provider Support","description":"Extend beyond local Ollama to support cloud LLM APIs for higher quality and scalability. Includes: abstract LLM client interface supporting multiple providers, Claude API integration, OpenAI API integration, provider selection per content generation job, cost tracking per generation, fallback chain across providers.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:01.030628171Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:01.030628171Z","dependencies":[{"issue_id":"symbology-fet","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:31.129668563Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-fet","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:01:40.044585296Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-i2y","title":"Sentiment Scoring \u0026 Trends","description":"Quantify sentiment from filings and generated content to enable trend analysis. Includes: sentiment scoring model for filing sections, sentiment trend charts over time per company, sector-level sentiment aggregation, sentiment change alerts for significant shifts.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:10.031213081Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:10.031213081Z","dependencies":[{"issue_id":"symbology-i2y","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:39.478460206Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-i2y","depends_on_id":"symbology-6k4","type":"blocks","created_at":"2026-02-05T21:01:40.195029113Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ipe","title":"Right-size max_tokens per pipeline stage","description":"Currently max_tokens: 4096 for all stages including frontpage which asks for ~100 words. Change to: single summaries 2048, aggregate summaries 4096 (keep), frontpage summaries 512. Prevents runaway outputs. Files: server/symbology/worker/pipeline.py (L17-21)","status":"closed","priority":0,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:58.431739764Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:05:44.33801165Z","closed_at":"2026-02-06T22:05:44.33801165Z","close_reason":"Closed"}
{"id":"symbology-j46","title":"Formalize type sharing between server/ and ui/ (prototype generate api types needs review)","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T22:40:25.419300495Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:40:25.419300495Z"}
{"id":"symbology-j9l","title":"update UI to use our refactored types (including token usage display)","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T22:42:32.869257213Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:42:32.869257213Z"}
{"id":"symbology-npy","title":"Review prompts","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T07:49:30.557099233Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T21:56:06.09942328Z","closed_at":"2026-02-06T21:56:06.09942328Z","close_reason":"Superseded by specific prompt issues: symbology-og2 (market_risk), symbology-d0c (typos), symbology-sem (aggregate prompt)"}
{"id":"symbology-oaz","title":"Update edgartools integration for v5.x API changes","description":"Ingestion tests (tests/ingestion/) are excluded via norecursedirs and all 16 fail against current code. Need to: (1) update ingestion_helpers to match edgartools 5.x API (e.g. get_balance_sheet_values removed), (2) fix test mocks to match current function signatures, (3) address edgartools deprecation warnings (HtmlDocument, html_sections moving in v6.0), (4) re-enable tests by removing norecursedirs exclusion and ruff exclude for tests/ingestion.","status":"closed","priority":1,"issue_type":"chore","owner":"steven@fitz.gg","created_at":"2026-02-06T05:05:19.492264287Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T06:29:45.764480245Z","closed_at":"2026-02-06T06:29:45.764480245Z","close_reason":"Uncommented and updated XBRL financial extraction functions in accessors.py for edgartools v5.x, imported them in ingestion_helpers.py, rewrote all 16 ingestion tests to match actual implementation API, removed test exclusions from pyproject.toml. All 153 tests pass."}
{"id":"symbology-og2","title":"Fix market_risk prompt (duplicate of risk_factors)","description":"prompts/market_risk/prompt.md is an exact duplicate of prompts/risk_factors/prompt.md. It asks about 'risk factors section' when it should address quantitative market risk disclosures (interest rate sensitivity, FX exposure, commodity prices). Write a dedicated market risk prompt focused on quantitative disclosures, then re-run market_risk single summaries for one company to validate. Files: server/prompts/market_risk/prompt.md","status":"closed","priority":2,"issue_type":"bug","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:59.901089462Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:45:36.825156466Z","closed_at":"2026-02-06T22:45:36.825156466Z","close_reason":"Closed"}
{"id":"symbology-oiz","title":"LLM Context \u0026 Cost Optimization","description":"Reduce Anthropic API costs and improve context utilization in the SEC filing content generation pipeline. Covers config quick-wins, observability, prompt quality, and architectural improvements. See OPTIMIZATION_PLAN.md.","status":"open","priority":1,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:31.726507563Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T21:38:31.726507563Z","dependencies":[{"issue_id":"symbology-oiz","depends_on_id":"symbology-t8a","type":"blocks","created_at":"2026-02-06T21:56:00.940027831Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-0ra","type":"blocks","created_at":"2026-02-06T21:56:00.997517895Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-afp","type":"blocks","created_at":"2026-02-06T21:56:01.056900062Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-ipe","type":"blocks","created_at":"2026-02-06T21:56:01.115496187Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-8eb","type":"blocks","created_at":"2026-02-06T21:56:01.174207625Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-og2","type":"blocks","created_at":"2026-02-06T21:56:01.231183842Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-d0c","type":"blocks","created_at":"2026-02-06T21:56:01.284518476Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-sem","type":"blocks","created_at":"2026-02-06T21:56:01.338902194Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-qyh","type":"blocks","created_at":"2026-02-06T21:56:01.392866441Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-ad2","type":"blocks","created_at":"2026-02-06T21:56:01.444768998Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-pxz","type":"blocks","created_at":"2026-02-06T21:56:01.495881794Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-pxz","title":"Complexity router for short/stable sections","description":"controls_procedures is typically very short and formulaic ('management assessed... internal controls are effective'). Running it through the full 3-stage pipeline (7 LLM calls) is wasteful. Steps: (1) Add document-length threshold check before entering pipeline, (2) For short/stable sections, route to single-pass summary instead of single -\u003e aggregate -\u003e frontpage, (3) Make threshold configurable per document type. Est. savings: eliminate ~2/3 of calls for simple sections. Files: server/symbology/worker/handlers.py, server/symbology/worker/pipeline.py","status":"closed","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-06T21:39:06.42909616Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:00:16.971860345Z","closed_at":"2026-02-06T23:00:16.971860345Z","close_reason":"Merged into symbology-ad2 — raw document diffs handle both skip-unchanged and diff-summarize cases, replacing the need for a separate complexity router","dependencies":[{"issue_id":"symbology-pxz","depends_on_id":"symbology-8eb","type":"blocks","created_at":"2026-02-06T21:43:29.503102107Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-qb1","title":"Export \u0026 Sharing","description":"Let users export and share insights. Includes: PDF report generation for individual companies or comparisons, shareable public links for specific generated content, CSV/JSON export of financial data, embeddable widget for generated insights.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:01.43301258Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:01.43301258Z","dependencies":[{"issue_id":"symbology-qb1","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:21.810000493Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-qb1","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.886036845Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-qvl","title":"Alerts \u0026 Notifications","description":"Notify users when new filings are published or when AI detects significant changes in a company's disclosures. Includes: new filing alerts, significant change detection (e.g. new risk factors), email and/or in-app notification delivery, user notification preferences.","status":"open","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:41.866321969Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:41.866321969Z","dependencies":[{"issue_id":"symbology-qvl","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:05.057685322Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-qvl","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.783213643Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-qvl","depends_on_id":"symbology-ehx","type":"blocks","created_at":"2026-02-05T21:01:39.939872226Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-qvl","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:01:40.096467891Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-qyh","title":"Pre-process and normalize filing text before storage","description":"Normalize filing text to reduce input tokens by 10-20%. Steps: (1) Collapse excessive whitespace and blank lines, (2) Strip residual HTML entities and formatting artifacts from EDGAR extraction, (3) Normalize Unicode characters (smart quotes, em-dashes, etc.), (4) Apply normalization in ingest_filing_documents before storing content. Files: server/symbology/ingestion/ingestion_helpers.py","status":"closed","priority":3,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:39:06.322841319Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:04:14.781443911Z","closed_at":"2026-02-06T23:04:14.781443911Z","close_reason":"Implemented normalize_filing_text utility, wired into ingestion pipeline, added 14 unit tests","dependencies":[{"issue_id":"symbology-qyh","depends_on_id":"symbology-8eb","type":"blocks","created_at":"2026-02-06T21:43:29.395516264Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-rit","title":"Watchlists \u0026 Portfolios","description":"Let users create and manage watchlists of companies they want to track. Foundation for personalized experience. Includes: create/edit/delete watchlists, add/remove companies, watchlist dashboard view showing latest insights for tracked companies.","status":"open","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:39.871885082Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:39.871885082Z","dependencies":[{"issue_id":"symbology-rit","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:02.284927874Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-rit","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.732343649Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-sem","title":"Strengthen the aggregate-summary prompt","description":"Currently just: 'Summarize the historical changes in these documents.' Improvements needed: (1) Specify what constitutes a meaningful 'change' (quantitative shifts, strategy pivots, new risks, discontinued segments), (2) Define output structure (chronological vs. thematic), (3) Instruct model to call out when sections are largely unchanged YoY instead of restating stable content. Reduces output variance, focuses synthesis. Files: server/prompts/aggregate-summary/prompt.md","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:39:00.005356161Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:45:36.832004674Z","closed_at":"2026-02-06T22:45:36.832004674Z","close_reason":"Closed"}
{"id":"symbology-t8a","title":"Skip LLM calls for already-processed documents","description":"Before calling handle_content_generation for single summaries, query for existing generated content matching the same (source_document, system_prompt, model_config) triple. If a match exists, reuse its content_hash and skip the API call. We already have content_hash on documents and generated_content_document_association — just need the pre-check in handle_full_pipeline (handlers.py ~L369-408). Est. savings: 80-100% on re-runs. Files: server/symbology/worker/handlers.py","status":"closed","priority":0,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:49.143880191Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:05:44.315880666Z","closed_at":"2026-02-06T22:05:44.315880666Z","close_reason":"Closed"}
{"id":"symbology-uup","title":"Restructure monorepo: src/ → server/symbology/ with clean component separation","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T22:03:28.677111531Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T22:17:17.001992065Z","closed_at":"2026-02-05T22:17:17.001992065Z","close_reason":"Restructured src/ → server/symbology/ with all 180 tests passing"}
{"id":"symbology-v3q","title":"End-to-End Test Suite","description":"Build comprehensive test coverage across the stack. Includes: pytest API integration tests for all endpoints, Playwright E2E tests for critical UI flows, CI pipeline integration, test data fixtures and factories, coverage reporting with minimum threshold.","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:20.916288336Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:20.916288336Z","dependencies":[{"issue_id":"symbology-v3q","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:48.921095934Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-xf3","title":"Sector \u0026 Industry Dashboards","description":"Aggregate AI-generated insights at the sector and industry level using SIC codes. Includes: sector overview pages showing common themes and risks, industry trend detection across companies, top risks/opportunities by sector, sector-level sentiment and change indicators.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:03.058670617Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:03.058670617Z","dependencies":[{"issue_id":"symbology-xf3","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:34.96492397Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-xf3","depends_on_id":"symbology-7nv","type":"blocks","created_at":"2026-02-05T21:01:40.245927389Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-y1l","title":"API Rate Limiting \u0026 Versioning","description":"Production-harden the API with rate limiting and versioning. Includes: rate limiting middleware (per-IP or per-API-key), /v1/ API prefix for versioning, API deprecation strategy, rate limit headers in responses (X-RateLimit-Remaining etc).","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:15.616117782Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:15.616117782Z","dependencies":[{"issue_id":"symbology-y1l","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:47.090484819Z","created_by":"Steven Fitzpatrick"}]}
