{"id":"symbology-001","title":"Add 'only running' option to cli pipeline status'\n","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T22:26:57.092087068Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:26:57.092087068Z"}
{"id":"symbology-00n","title":"User Accounts \u0026 Authentication","description":"Add user authentication and account management. Foundation for personalization, saved state, and monetization. Includes: user registration and login (email/password, OAuth), session management (JWT or session cookies), user profile page, password reset flow, API authentication middleware.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:49.309883685Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:49.309883685Z","dependencies":[{"issue_id":"symbology-00n","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:14.248564875Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-00n","depends_on_id":"symbology-7nv","type":"blocks","created_at":"2026-02-05T21:04:39.897133024Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-00n","depends_on_id":"symbology-6k4","type":"blocks","created_at":"2026-02-05T21:04:39.945734056Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-0ra","title":"Downgrade single summaries from Sonnet to Haiku","description":"Change single_summary model in PIPELINE_MODEL_CONFIGS from claude-sonnet-4-5-20250929 to claude-haiku-4-5-20251001. Before switching, run a side-by-side comparison: generate Haiku single summaries for 1-2 companies and diff against existing Sonnet outputs. If quality is acceptable, ship the change. Est. savings: ~10x cost reduction on ~80% of LLM calls. Files: server/symbology/worker/pipeline.py (L17-21)","status":"closed","priority":0,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:52.397472912Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:05:44.32322155Z","closed_at":"2026-02-06T22:05:44.32322155Z","close_reason":"Closed"}
{"id":"symbology-1ds","title":"Company group CLI commands","description":"Phase 3 of symbology-bdx: Create cli/groups.py with create/list/show/add-company/populate subcommands. Add trigger-group command to pipeline CLI. Register in cli/main.py. See plan: Phase 3.","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-07T01:27:01.970453712Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T03:08:44.856392615Z","closed_at":"2026-02-07T03:08:44.856392615Z","close_reason":"Implemented in cf5b214 and 1e21896","dependencies":[{"issue_id":"symbology-1ds","depends_on_id":"symbology-bdx","type":"parent-child","created_at":"2026-02-07T01:27:10.552725468Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-1ds","depends_on_id":"symbology-94q","type":"blocks","created_at":"2026-02-07T01:27:14.668848811Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-2c0","title":"Financial Data Temporal Comparison","description":"Year-over-year comparison view for structured financial data (balance sheets, income statements). Show how a company's financial position has changed across filing periods.\n\n## Scope\n- Extract and store key financial metrics from filings (or source from existing document data)\n- UI view: side-by-side or table comparing financial line items across 2+ periods\n- Visual indicators for significant changes (growth, decline, new items)\n- Initially scoped to balance sheet data from 10-K filings\n\n## Out of Scope\n- Generated content temporal comparison (see timeline backlog item)\n- Automated trend narrative generation (future enhancement)","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-07T00:53:50.798876604Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T03:36:15.201728253Z","closed_at":"2026-02-07T03:36:15.201728253Z","close_reason":"Implemented all 5 subtasks: pipeline wiring, CLI fix, temporal comparison query, API endpoint, and comparison UI","dependencies":[{"issue_id":"symbology-2c0","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-07T00:54:52.881354255Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-2jq","title":"Tier 4: Infrastructure \u0026 Hardening","status":"open","priority":2,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:07.901525209Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:07.901525209Z"}
{"id":"symbology-2rd","title":"Redis Caching Layer","description":"Add Redis for caching frequently accessed data to reduce database load. Includes: Redis service in docker-compose, cache decorator/middleware for API routes, cache company search results, cache generated content by hash, cache invalidation strategy, cache hit/miss metrics.","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:13.337094212Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:13.337094212Z","dependencies":[{"issue_id":"symbology-2rd","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:45.182124792Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-3zd","title":"Observability \u0026 Monitoring","description":"Add metrics, tracing, and monitoring for production reliability. Includes: Prometheus metrics endpoint, request latency and error rate metrics, database query performance metrics, LLM generation latency and token usage metrics, Grafana dashboard updates (dashboard.json already exists), health check improvements, alerting rules for critical failures.","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:27.715080652Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:27.715080652Z","dependencies":[{"issue_id":"symbology-3zd","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:52.34793099Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-42o","title":"Tier 2: User Experience \u0026 Engagement","status":"open","priority":2,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:46.87445442Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:46.87445442Z"}
{"id":"symbology-4ej","title":"Company Group DB model \u0026 migration","description":"Phase 1 of symbology-bdx: Create CompanyGroup model, company_group_membership association table, add company_group_id FK to GeneratedContent, Alembic migration with TSVECTOR/GIN/triggers, COMPANY_GROUP_PIPELINE job type enum value. See plan: Phase 1.","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-07T01:26:57.942689414Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T03:08:44.842966512Z","closed_at":"2026-02-07T03:08:44.842966512Z","close_reason":"Implemented in cf5b214 and 1e21896","dependencies":[{"issue_id":"symbology-4ej","depends_on_id":"symbology-bdx","type":"parent-child","created_at":"2026-02-07T01:27:10.438621462Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-4qk","title":"Earnings Call Transcript Analysis","description":"Extend data sources beyond SEC filings to include earnings call transcripts. Includes: earnings call transcript ingestion pipeline, AI-generated summaries of management commentary, sentiment analysis of Q\u0026A sections, cross-reference with filing disclosures for consistency checking.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:06.720044117Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:06.720044117Z","dependencies":[{"issue_id":"symbology-4qk","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:36.761421658Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-537","title":"Tier 1: Core Product Value","status":"open","priority":1,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:37.140985184Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:37.140985184Z"}
{"id":"symbology-5ku","title":"Company group API endpoints","description":"Phase 4 of symbology-bdx: Add CompanyGroupResponse schema, create routes/groups.py with GET /groups, /groups/{slug}, /groups/{slug}/analysis. Register router. Add company_group to unified search. See plan: Phase 4.","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-07T01:27:04.129926688Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T03:08:44.863299057Z","closed_at":"2026-02-07T03:08:44.863299057Z","close_reason":"Implemented in cf5b214 and 1e21896","dependencies":[{"issue_id":"symbology-5ku","depends_on_id":"symbology-bdx","type":"parent-child","created_at":"2026-02-07T01:27:10.608287247Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-5ku","depends_on_id":"symbology-4ej","type":"blocks","created_at":"2026-02-07T01:27:14.608277315Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-5p7","title":"Filing Diff \u0026 Change Tracking","description":"Highlight what changed between successive filings for the same company — one of the most valuable features for analysts. Includes: diff view showing added/removed/changed sections between filings, AI-generated summary of material changes, change severity scoring, historical change timeline for a company.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:57.888654099Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:57.888654099Z","dependencies":[{"issue_id":"symbology-5p7","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:19.831870087Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-65c","title":"Tiered Access \u0026 API Keys","description":"Implement usage-based access tiers to monetize the platform. Includes: free tier with rate limits and limited companies, paid tier(s) with higher limits and premium features, API key generation and management, usage tracking and billing integration, developer API documentation portal.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:58.93159236Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:58.93159236Z","dependencies":[{"issue_id":"symbology-65c","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:29.372961826Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-65c","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.993354949Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-6k4","title":"Financial Data Visualizations","description":"Surface the XBRL financial data already being extracted as interactive charts and graphs. The database already has financial_concepts and financial_values tables plus LayerChart is installed in the frontend. Includes: revenue/income/margin trend charts, balance sheet visualizations, key financial metric cards on company pages, comparative financial charts across companies.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:54.777564286Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:54.777564286Z","dependencies":[{"issue_id":"symbology-6k4","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:17.986995579Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-6k4","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:04:39.847226495Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-74b","title":"Update ID structure to enhance UX (uuid can be the true idea but in cli we need something shorter)","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T23:44:55.392408204Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:44:55.392408204Z"}
{"id":"symbology-79x","title":"Company group / sectors UI","description":"Phase 5 of symbology-bdx: Regenerate API types, add group API functions, create /sectors listing page, /sectors/[slug] detail page, add Sectors to navigation. See plan: Phase 5.","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-07T01:27:05.98335014Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T03:08:44.869814038Z","closed_at":"2026-02-07T03:08:44.869814038Z","close_reason":"Implemented in cf5b214 and 1e21896","dependencies":[{"issue_id":"symbology-79x","depends_on_id":"symbology-bdx","type":"parent-child","created_at":"2026-02-07T01:27:10.662953083Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-79x","depends_on_id":"symbology-5ku","type":"blocks","created_at":"2026-02-07T01:27:14.741416902Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-7nv","title":"Improved Search \u0026 Discovery","description":"Replace basic LIKE queries with PostgreSQL full-text search across companies, filings, and generated content.\n\n## Approach\n- PostgreSQL tsvector columns + GIN indexes (no Elasticsearch needed)\n- Weighted search vectors: A=names/tickers/summaries, B=display_name/accession/form/descriptions, C=SIC codes\n- Database triggers auto-update vectors on INSERT/UPDATE\n- Unified `GET /search` endpoint with `UNION ALL` across entity types, ranked by `ts_rank()`\n- `websearch_to_tsquery()` for Google-like query syntax\n- `ts_headline()` for highlighted result excerpts\n\n## Filters\n- Entity type (company, filing, generated_content)\n- SIC code / sector\n- Form type (10-K, 10-Q, etc.)\n- Document type (MDA, RISK_FACTORS, etc.)\n- Date range (filing_date / created_at)\n\n## Key Files\n- `server/alembic/versions/*_add_fts_search_vectors.py` (new migration)\n- `server/symbology/database/search.py` (new unified search module)\n- `server/symbology/api/routes/search.py` (new search endpoint)\n- `server/symbology/api/schemas.py` (SearchResultItem, SearchResponse)\n- `server/symbology/database/companies.py` (update search_companies_by_query to use FTS)\n- `server/symbology/database/{companies,filings,generated_content}.py` (add search_vector columns)","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:46.33711807Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T00:31:57.658947585Z","closed_at":"2026-02-07T00:31:57.658947585Z","close_reason":"Full-text search implemented: PostgreSQL tsvector/GIN indexes, unified search API endpoint, dedicated /search page with filters, enhanced CompanySelector, openapi-typescript type generation, actual token display.","dependencies":[{"issue_id":"symbology-7nv","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:08.98943157Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-7nv","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:04:39.794961941Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-8eb","title":"Track input/output tokens from API response","description":"The Anthropic API returns message.usage.input_tokens and message.usage.output_tokens — we currently ignore these. Steps: (1) Update AnthropicResponseAdapter to capture input_tokens and output_tokens from API response, (2) Add input_tokens and output_tokens columns to generated_content table (new Alembic migration), (3) Store token counts alongside each generated content record, (4) Add a CLI command or API endpoint to report token usage per pipeline run. Enables data-driven optimization and cost attribution per pipeline stage. Files: server/symbology/llm/client.py (L16-24), server/symbology/database/generated_content.py","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:51.289903651Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:40:35.147112072Z","closed_at":"2026-02-06T22:40:35.147112072Z","close_reason":"Added input_tokens/output_tokens to AnthropicResponseAdapter, GeneratedContent model, Alembic migration, handlers, and CLI output"}
{"id":"symbology-8f5","title":"Tier 3: Monetization \u0026 Scale","status":"open","priority":3,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:56.43241738Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:56.43241738Z"}
{"id":"symbology-94q","title":"Company group analysis pipeline handler","description":"Phase 2 of symbology-bdx: Create company-group-analysis prompt, add company_group_analysis model config and prompt to pipeline.py, add COMPANY_GROUP_PIPELINE job type, implement handle_company_group_pipeline handler in handlers.py. See plan: Phase 2.","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-07T01:26:59.929064155Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T03:08:44.849690534Z","closed_at":"2026-02-07T03:08:44.849690534Z","close_reason":"Implemented in cf5b214 and 1e21896","dependencies":[{"issue_id":"symbology-94q","depends_on_id":"symbology-bdx","type":"parent-child","created_at":"2026-02-07T01:27:10.4975346Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-94q","depends_on_id":"symbology-4ej","type":"blocks","created_at":"2026-02-07T01:27:14.545738505Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-9a3","title":"Replace Ollama with Claude (Anthropic) API","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-06T03:18:54.540599474Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T03:29:29.446228538Z","closed_at":"2026-02-06T03:29:29.446228538Z","close_reason":"Replaced Ollama with Anthropic Claude API across all 10 files. All 137 tests pass."}
{"id":"symbology-ad2","title":"Diff-based pipeline: skip unchanged sections, diff-summarize the rest","description":"Use raw source document diffs across filing periods to both reduce and eliminate LLM calls. Since SEC filings have high YoY textual overlap, diffing the raw text (post-normalization) enables two optimizations in one:\n\n1. **Skip unchanged sections entirely** — If a section (e.g. controls_procedures) is identical or near-identical across periods, skip the Haiku call and reuse the prior summary. This replaces the need for a separate complexity router (symbology-pxz).\n\n2. **Diff-based single summaries** — For sections that did change, send Haiku the most recent filing's full text + structured diffs for prior periods instead of full text for every period. Reduces Haiku input tokens at the highest-volume pipeline stage.\n\nSteps:\n(1) Implement text diff utility for raw filing documents across periods (character-level or line-level similarity score + human-readable diff)\n(2) Add similarity threshold — below threshold, reuse prior summary; above threshold, generate with diff-formatted input\n(3) Make thresholds configurable per document type (controls_procedures can have a high reuse threshold since it's typically formulaic)\n(4) Update single-summary prompts to handle diff-formatted input\n(5) Compare output quality and token savings against current full-text approach\n\nPrerequisite: symbology-qyh (normalized text makes diffing reliable).\nFiles: server/symbology/llm/prompts.py, server/symbology/worker/handlers.py, server/symbology/worker/pipeline.py","status":"open","priority":4,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-06T21:39:06.373378796Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:14:57.642048337Z","dependencies":[{"issue_id":"symbology-ad2","depends_on_id":"symbology-8eb","type":"blocks","created_at":"2026-02-06T21:43:29.449932941Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ad2","depends_on_id":"symbology-qyh","type":"blocks","created_at":"2026-02-06T22:57:10.844015905Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-afp","title":"Lower temperature for factual extraction","description":"Current default is temperature: 0.8 across all stages — too high for deterministic factual extraction. Change to: single summaries 0.2, aggregate summaries 0.3, frontpage summaries 0.3. Est. savings: indirect (better outputs, less variance, fewer retries). Files: server/symbology/worker/pipeline.py, server/symbology/utils/config.py","status":"closed","priority":0,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:55.435631026Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:05:44.33045808Z","closed_at":"2026-02-06T22:05:44.33045808Z","close_reason":"Closed"}
{"id":"symbology-ahh","title":"Pipeline monitoring API, CLI, and alerting","status":"closed","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-06T02:20:34.94319809Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T02:24:58.682260489Z","closed_at":"2026-02-06T02:24:58.682260489Z","close_reason":"Implemented pipeline monitoring API (4 routes), CLI commands (status/trigger/runs), alerts module with webhook dispatch, and 29 new tests"}
{"id":"symbology-bdx","title":"Sector \u0026 Cross-Company Analysis","description":"Generate aggregate summaries across groups of companies (by sector, industry, or custom grouping) to surface common trends, risks, and opportunities in the broader landscape.\n\n## Company Groups Model\nA reusable 'company group' abstraction that supports:\n- System-defined sector groups (e.g., 'Tech Giants', 'Auto Manufacturers') based on SIC codes\n- Future: user-defined custom groups (watchlists, symbology-rit)\n\nThe group model should be designed so watchlists (symbology-rit) can extend it with user ownership later.\n\n## Sector Analysis Pipeline\n- Select a group of companies\n- Gather their latest aggregate summaries\n- Generate a cross-company analysis identifying: common themes, divergent risks, sector-wide opportunities, outliers\n- Store as a new generated_content document_type (e.g., 'sector_analysis')\n\n## UI\n- Sector/group listing page\n- Sector detail page showing the cross-company analysis with links to individual companies\n- Group composition (which companies are in the group)","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:43.878894155Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T03:08:44.876792486Z","closed_at":"2026-02-07T03:08:44.876792486Z","close_reason":"Implemented in cf5b214 and 1e21896","dependencies":[{"issue_id":"symbology-bdx","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:06.648195251Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-byj","title":"Background Job Queue","description":"Implement async job processing for long-running tasks like ingestion and content generation. Includes: job queue infrastructure (Celery, or arq, or similar), worker processes for ingestion and LLM generation, job status tracking and reporting, retry logic with dead letter queue, admin UI or CLI for job management.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:24.299973902Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T00:22:22.664373353Z","closed_at":"2026-02-06T00:22:22.664373353Z","close_reason":"Implemented full background job queue: PostgreSQL-native queue with SELECT FOR UPDATE SKIP LOCKED, worker process with signal handling, API endpoints, CLI commands, real job handlers for ingestion/content-generation, deployment config. 47 new tests, all 227 pass.","dependencies":[{"issue_id":"symbology-byj","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:50.692945124Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-byj","depends_on_id":"symbology-dun","type":"blocks","created_at":"2026-02-05T21:04:39.741954389Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-c7x","title":"We need to update our rate limiting on the anthropic api - we have backoff but it caps at 1min, should be 2-3","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T23:47:50.664799361Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:47:50.664799361Z"}
{"id":"symbology-d0c","title":"Fix typos in prompts","description":"Two prompt files have typos: (1) controls_procedures/prompt.md: 'procedutres' -\u003e 'procedures', 'they key componets' -\u003e 'the key components'. (2) management_discussion/prompt.md: trailing ' a' on last line. Files: server/prompts/controls_procedures/prompt.md, server/prompts/management_discussion/prompt.md","status":"closed","priority":2,"issue_type":"bug","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:59.952808779Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:45:36.818055795Z","closed_at":"2026-02-06T22:45:36.818055795Z","close_reason":"Closed"}
{"id":"symbology-dun","title":"Alembic Database Migrations","description":"Replace SQLAlchemy create_all() with Alembic migration framework. Required before any schema changes can be safely deployed. Includes: initialize Alembic config, generate initial migration from current schema, migration for all existing tables, CI check that migrations are up to date, documentation on creating new migrations.","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:11.308364316Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T22:40:48.012104713Z","closed_at":"2026-02-05T22:40:48.012104713Z","close_reason":"Alembic initialized with initial migration, create_all() removed, justfile recipes added, 180 tests passing","dependencies":[{"issue_id":"symbology-dun","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:43.170934416Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx","title":"Automated Data Pipeline","description":"Automate ingestion of new SEC filings as they appear on EDGAR, replacing the current manual CLI-driven process. Includes: scheduled polling of EDGAR for new filings, automatic document extraction and LLM content generation, background job queue for async processing, monitoring and alerting for pipeline failures.","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:50.022106994Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T02:58:42.146879478Z","closed_at":"2026-02-06T02:58:42.146879478Z","close_reason":"All subtasks complete: orchestration, job handler, run tracking, scheduler, monitoring, and justfile/compose wiring","dependencies":[{"issue_id":"symbology-ehx","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:13.81633473Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:01:40.144683247Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.1","title":"Pipeline orchestration helpers","description":"Create server/symbology/worker/pipeline.py with shared utilities: ensure_model_config(name, num_ctx) to create-or-return ModelConfig, ensure_prompt(prompt_name) to load from prompts/ dir and create-or-return Prompt. These replace the CLI model-configs create / prompts create calls used in ingest.just.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:37:51.615325046Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T01:00:55.738132957Z","closed_at":"2026-02-06T01:00:55.738132957Z","close_reason":"Closed","dependencies":[{"issue_id":"symbology-ehx.1","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:37:51.616514128Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.2","title":"FULL_PIPELINE job type, handler, and migration","description":"Add FULL_PIPELINE to JobType enum in database/jobs.py. Add handle_full_pipeline handler in worker/handlers.py that orchestrates the full ingest.just logic in Python: (1) company ingestion, (2) filing ingestion with documents, (3) for each document_type x accession_number create single summary via CONTENT_GENERATION, (4) aggregate summary from all singles, (5) frontpage summary from aggregate. Uses pipeline helpers for model config/prompt resolution. Params: {ticker, forms, count, document_types}. Add Alembic migration to extend job_type_enum.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:37:55.247852543Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T01:27:34.610149381Z","closed_at":"2026-02-06T01:27:34.610149381Z","close_reason":"Closed","dependencies":[{"issue_id":"symbology-ehx.2","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:37:55.253760156Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.2","depends_on_id":"symbology-ehx.1","type":"blocks","created_at":"2026-02-06T00:38:10.097233183Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.3","title":"Pipeline run tracking model","description":"Create server/symbology/database/pipeline_runs.py with PipelineRun model: id (uuid7), company_id (FK), trigger (MANUAL/SCHEDULED enum), status (PENDING/RUNNING/COMPLETED/FAILED/PARTIAL enum), forms (ARRAY[str]), started_at, completed_at, error (Text), jobs_created (int), jobs_completed (int), jobs_failed (int), metadata (JSON). Add CRUD functions. Add Alembic migration. Integrate with FULL_PIPELINE handler: create PipelineRun at start, update on completion/failure, track partial success.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:37:57.720130018Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T01:40:59.455157363Z","closed_at":"2026-02-06T01:40:59.455157363Z","close_reason":"Closed","dependencies":[{"issue_id":"symbology-ehx.3","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:37:57.721343964Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.4","title":"Scheduler module with EDGAR polling","description":"Create server/symbology/scheduler/ package: (1) config.py - SchedulerSettings (pydantic-settings, env prefix SCHEDULER_): poll_interval (default 21600s/6hr), enabled_forms (default [10-K, 10-Q]), filing_lookback_days (default 30). (2) polling.py - check_company_for_new_filings(ticker, forms, lookback_days) queries EDGAR and compares accession numbers vs DB; poll_all_companies() iterates all companies and enqueues FULL_PIPELINE jobs for those with new filings. (3) main.py - long-lived process with graceful shutdown (SIGTERM/SIGINT), periodic poll loop with time.sleep, stale run detection. Same pattern as worker/main.py.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:38:01.444248778Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T01:52:57.454437454Z","closed_at":"2026-02-06T01:52:57.454437454Z","close_reason":"Closed","dependencies":[{"issue_id":"symbology-ehx.4","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:38:01.445327833Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.4","depends_on_id":"symbology-ehx.2","type":"blocks","created_at":"2026-02-06T00:38:10.152126479Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.5","title":"Monitoring API, CLI, and alerting","description":"API routes (server/symbology/api/routes/pipeline.py): GET /pipeline/runs (list with filters), GET /pipeline/runs/{id} (detail with linked jobs), GET /pipeline/status (dashboard: last run per company, failures, next poll), POST /pipeline/trigger/{ticker} (manual trigger). CLI commands (server/symbology/cli/pipeline.py): pipeline status, pipeline trigger TICKER, pipeline runs. Failure alerting (server/symbology/scheduler/alerts.py): detect consecutive failures per company, stale RUNNING runs; alert via structured log events; optional webhook URL config for Slack/Discord.","design":"## Implementation Plan\n\n### New Files\n- api/routes/pipeline.py — 4 API routes (list runs, get run, status dashboard, manual trigger)\n- cli/pipeline.py — CLI commands (pipeline status, trigger, runs)\n- scheduler/alerts.py — Alert detection + webhook dispatch\n- Tests for all three\n\n### Modified Files\n- schemas.py — PipelineRunResponse, PipelineStatusResponse, CompanyPipelineStatus, PipelineTriggerRequest\n- routes/__init__.py — Register /pipeline router\n- main.py (api) — Add pipeline openapi tag\n- main.py (cli) — Register pipeline command group\n- pipeline_runs.py — Add get_latest_run_per_company(), count_consecutive_failures()\n- scheduler/config.py — Add alert thresholds + webhook settings (SCHEDULER_ prefix)\n- scheduler/main.py — Replace _detect_stale_runs() with check_alerts()\n\n### Logging Convention\n- snake_case event names, structured kwargs\n- Bounded cardinality: counts not lists, error_type not error_message, url_host not full URL\n- Events: alert_consecutive_failures, alert_stale_run, alert_webhook_sent, api_trigger_pipeline, etc.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:38:04.196031622Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T02:36:45.624114785Z","closed_at":"2026-02-06T02:36:45.624114785Z","close_reason":"Work already committed in 26a2fc7","dependencies":[{"issue_id":"symbology-ehx.5","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:38:04.196943195Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.5","depends_on_id":"symbology-ehx.3","type":"blocks","created_at":"2026-02-06T00:38:10.202559124Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.5","depends_on_id":"symbology-ehx.4","type":"blocks","created_at":"2026-02-06T00:38:10.255656506Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ehx.6","title":"Justfile and Docker compose wiring","description":"Add scheduler recipe to server/justfile: uv run -m symbology.scheduler.main. Add scheduler delegation to root justfile. Add pipeline trigger TICKER recipe. Add scheduler service to symbology-compose.yaml alongside api and worker. Register pipeline router in api/main.py, register pipeline CLI group in cli/main.py.","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T00:38:06.188890476Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T02:50:21.569835326Z","closed_at":"2026-02-06T02:50:21.569835326Z","close_reason":"Added run-scheduler and run-pipeline-trigger recipes to root justfile, added symbology-scheduler service to docker compose","dependencies":[{"issue_id":"symbology-ehx.6","depends_on_id":"symbology-ehx","type":"parent-child","created_at":"2026-02-06T00:38:06.18982982Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.6","depends_on_id":"symbology-ehx.4","type":"blocks","created_at":"2026-02-06T00:38:10.310055769Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-ehx.6","depends_on_id":"symbology-ehx.5","type":"blocks","created_at":"2026-02-06T00:38:10.367670557Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-etp","title":"Interactive Q\u0026A on Filings","description":"Allow users to ask natural language questions about a company's filings and get AI-generated answers grounded in the source documents. Includes: chat-style interface on company pages, RAG pipeline to retrieve relevant document sections, source attribution with links to original filing text, conversation history per company.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:51.652332004Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:51.652332004Z","dependencies":[{"issue_id":"symbology-etp","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:16.150459854Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-etp","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.83648374Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-fet","title":"Cloud LLM Provider Support","description":"Extend beyond local Ollama to support cloud LLM APIs for higher quality and scalability. Includes: abstract LLM client interface supporting multiple providers, Claude API integration, OpenAI API integration, provider selection per content generation job, cost tracking per generation, fallback chain across providers.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:01.030628171Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:01.030628171Z","dependencies":[{"issue_id":"symbology-fet","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:31.129668563Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-fet","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:01:40.044585296Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-i2y","title":"Sentiment Scoring \u0026 Trends","description":"Quantify sentiment from filings and generated content to enable trend analysis. Includes: sentiment scoring model for filing sections, sentiment trend charts over time per company, sector-level sentiment aggregation, sentiment change alerts for significant shifts.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:10.031213081Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:10.031213081Z","dependencies":[{"issue_id":"symbology-i2y","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:39.478460206Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-i2y","depends_on_id":"symbology-6k4","type":"blocks","created_at":"2026-02-05T21:01:40.195029113Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-ipe","title":"Right-size max_tokens per pipeline stage","description":"Currently max_tokens: 4096 for all stages including frontpage which asks for ~100 words. Change to: single summaries 2048, aggregate summaries 4096 (keep), frontpage summaries 512. Prevents runaway outputs. Files: server/symbology/worker/pipeline.py (L17-21)","status":"closed","priority":0,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:58.431739764Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:05:44.33801165Z","closed_at":"2026-02-06T22:05:44.33801165Z","close_reason":"Closed"}
{"id":"symbology-isp","title":"Search UI: enhanced CompanySelector + dedicated /search page","description":"Build the search frontend with two integration points.\n\n## Enhanced CompanySelector\n- For queries \u003e= 3 chars, call unified `/search` endpoint\n- Show results grouped by entity type with badges (Company, Filing, Analysis)\n- Navigate to `/c/{ticker}`, `/f/{accession}`, or `/g/{ticker}/{hash}` based on type\n\n## Dedicated Search Page\n- `ui/src/routes/search/+page.svelte` + `+page.ts`\n- Search input with debounce\n- Filter sidebar: entity type checkboxes, SIC code, form type, date range\n- Results list with type badges, highlighted excerpts, pagination\n- URL state sync (query params for bookmarkable searches)\n\n## Navigation\n- Add 'Search' link to `ui/src/lib/components/ui/Navigation.svelte`\n\n## API Client\n- Add `search()` function to `ui/src/lib/api.ts`","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T23:53:36.746119117Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T00:31:53.345064348Z","closed_at":"2026-02-07T00:31:53.345064348Z","close_reason":"Created /search page with filters (entity type, form type, date range), pagination, result cards. Enhanced CompanySelector with unified search for 3+ char queries. Added Search to navigation.","dependencies":[{"issue_id":"symbology-isp","depends_on_id":"symbology-vje","type":"blocks","created_at":"2026-02-06T23:53:44.403352214Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-isp","depends_on_id":"symbology-j46","type":"blocks","created_at":"2026-02-06T23:53:44.462209031Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-j46","title":"Formalize type sharing between server/ and ui/ (prototype generate api types needs review)","description":"Replace custom `generate-api-types.js` script with `openapi-typescript` to eliminate all `any` types in generated TypeScript interfaces.\n\n## Problem\nCurrent `ui/scripts/generate-api-types.js` has a FIXME: doesn't handle `anyOf`/nullable from Pydantic's OpenAPI output, producing `any` for all Optional fields (display_name, sic, content, filing, etc.).\n\n## Approach\n1. Install `openapi-typescript` as dev dependency\n2. Replace justfile recipe: `npx openapi-typescript http://localhost:8000/openapi.json -o src/lib/generated-api-types.ts`\n3. Create bridge file `ui/src/lib/api-types.ts` that re-exports `components['schemas']['*']` as named types\n4. Move runtime utilities (`fetchApi`, `isApiError`, `ApiError`) from generated file to `api-types.ts`\n5. Update all imports from `$lib/generated-api-types` to `$lib/api-types`\n\n## Key Files\n- `ui/scripts/generate-api-types.js` (can be removed/replaced)\n- `ui/src/lib/generated-api-types.ts` (regenerated by openapi-typescript)\n- `ui/src/lib/api-types.ts` (new bridge + runtime utils)\n- `ui/src/lib/api.ts` (update imports)\n- `ui/justfile` (update recipe)\n- All .svelte files importing from generated-api-types","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T22:40:25.419300495Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T00:31:48.617078208Z","closed_at":"2026-02-07T00:31:48.617078208Z","close_reason":"Replaced custom generate-api-types.js with openapi-typescript. Created api-types.ts bridge file. Updated all imports across 10 files. Zero any types in generated output."}
{"id":"symbology-j9l","title":"update UI to use our refactored types (including token usage display)","description":"Update the UI to use properly typed interfaces and display actual token usage from the server.\n\n## Token Usage\n- Server already stores `input_tokens`/`output_tokens` on GeneratedContent (migration d9e3f2a56b8c)\n- `GeneratedContentResponse` schema silently drops these fields - need to add them\n- Also add missing `form_type` field to the schema\n- UI currently estimates tokens: `Math.ceil(content.length / 4)` - replace with actual values\n- Graceful fallback to estimation for older content without token data\n\n## Key Files\n- `server/symbology/api/schemas.py` (add input_tokens, output_tokens, form_type to GeneratedContentResponse)\n- `ui/src/routes/g/[ticker]/[sha]/+page.svelte` (display actual token counts)\n\n## Depends On\n- symbology-j46 (type generation) should be done first so new fields are properly typed","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T22:42:32.869257213Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-07T00:31:51.056275906Z","closed_at":"2026-02-07T00:31:51.056275906Z","close_reason":"Added input_tokens/output_tokens/form_type to GeneratedContentResponse schema. Updated g/[ticker]/[sha] page to show actual token usage with fallback to estimate.","dependencies":[{"issue_id":"symbology-j9l","depends_on_id":"symbology-j46","type":"blocks","created_at":"2026-02-06T23:53:44.518408427Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-jcm","title":"FTS migration: tsvector columns, GIN indexes, triggers","description":"Alembic migration to add PostgreSQL full-text search infrastructure.\n\n## Changes\n- Add `search_vector TSVECTOR` column to: companies, filings, generated_content\n- Create GIN indexes: ix_companies_search_vector, ix_filings_search_vector, ix_generated_content_search_vector\n- Create trigger functions to auto-update vectors on INSERT/UPDATE\n- Backfill existing rows with weighted tsvector data\n\n## Weight Strategy\n- A (highest): company name, ticker, content summaries\n- B: display_name, accession_number, form type, descriptions\n- C: SIC code/description\n\n## Files\n- `server/alembic/versions/\u003chash\u003e_add_fts_search_vectors.py` (new)\n- `server/symbology/database/{companies,filings,generated_content}.py` (add search_vector mapped_column)","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T23:53:36.532502415Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:59:10.759045692Z","closed_at":"2026-02-06T23:59:10.759045692Z","close_reason":"Migration, model columns, triggers all implemented"}
{"id":"symbology-n2o","title":"Company Timeline UI","description":"Automated timeline view for a company based on generated content across filing periods. Visualize the evolution of a company's story over time — how risks changed, how strategy shifted, key events surfaced in MD\u0026A, etc. Backlog item for future investigation.","status":"closed","priority":4,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-07T00:53:52.911298081Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-08T06:21:52.246017857Z","closed_at":"2026-02-08T06:21:52.246017857Z","close_reason":"Implemented filing-centric timeline on company page: horizontal timeline bar, filing detail panel with financials + documents/analysis, aggregate summary cards, new /filings/by-ticker/{ticker}/timeline endpoint with batched queries","dependencies":[{"issue_id":"symbology-n2o","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-07T00:54:52.938072806Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-npy","title":"Review prompts","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T07:49:30.557099233Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T21:56:06.09942328Z","closed_at":"2026-02-06T21:56:06.09942328Z","close_reason":"Superseded by specific prompt issues: symbology-og2 (market_risk), symbology-d0c (typos), symbology-sem (aggregate prompt)"}
{"id":"symbology-oaz","title":"Update edgartools integration for v5.x API changes","description":"Ingestion tests (tests/ingestion/) are excluded via norecursedirs and all 16 fail against current code. Need to: (1) update ingestion_helpers to match edgartools 5.x API (e.g. get_balance_sheet_values removed), (2) fix test mocks to match current function signatures, (3) address edgartools deprecation warnings (HtmlDocument, html_sections moving in v6.0), (4) re-enable tests by removing norecursedirs exclusion and ruff exclude for tests/ingestion.","status":"closed","priority":1,"issue_type":"chore","owner":"steven@fitz.gg","created_at":"2026-02-06T05:05:19.492264287Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T06:29:45.764480245Z","closed_at":"2026-02-06T06:29:45.764480245Z","close_reason":"Uncommented and updated XBRL financial extraction functions in accessors.py for edgartools v5.x, imported them in ingestion_helpers.py, rewrote all 16 ingestion tests to match actual implementation API, removed test exclusions from pyproject.toml. All 153 tests pass."}
{"id":"symbology-og2","title":"Fix market_risk prompt (duplicate of risk_factors)","description":"prompts/market_risk/prompt.md is an exact duplicate of prompts/risk_factors/prompt.md. It asks about 'risk factors section' when it should address quantitative market risk disclosures (interest rate sensitivity, FX exposure, commodity prices). Write a dedicated market risk prompt focused on quantitative disclosures, then re-run market_risk single summaries for one company to validate. Files: server/prompts/market_risk/prompt.md","status":"closed","priority":2,"issue_type":"bug","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:59.901089462Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:45:36.825156466Z","closed_at":"2026-02-06T22:45:36.825156466Z","close_reason":"Closed"}
{"id":"symbology-oiz","title":"LLM Context \u0026 Cost Optimization","description":"Reduce Anthropic API costs and improve context utilization in the SEC filing content generation pipeline. Covers config quick-wins, observability, prompt quality, and architectural improvements. See OPTIMIZATION_PLAN.md.","status":"closed","priority":1,"issue_type":"epic","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:31.726507563Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:15:00.585652638Z","closed_at":"2026-02-06T23:15:00.585652638Z","close_reason":"All optimization tasks complete: skip duplicates, Haiku downgrade, temperature tuning, max_tokens right-sizing, token tracking, prompt fixes, text normalization. Diff-based pipeline (ad2) split out as independent future feature.","dependencies":[{"issue_id":"symbology-oiz","depends_on_id":"symbology-t8a","type":"blocks","created_at":"2026-02-06T21:56:00.940027831Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-0ra","type":"blocks","created_at":"2026-02-06T21:56:00.997517895Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-afp","type":"blocks","created_at":"2026-02-06T21:56:01.056900062Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-ipe","type":"blocks","created_at":"2026-02-06T21:56:01.115496187Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-8eb","type":"blocks","created_at":"2026-02-06T21:56:01.174207625Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-og2","type":"blocks","created_at":"2026-02-06T21:56:01.231183842Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-d0c","type":"blocks","created_at":"2026-02-06T21:56:01.284518476Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-sem","type":"blocks","created_at":"2026-02-06T21:56:01.338902194Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-qyh","type":"blocks","created_at":"2026-02-06T21:56:01.392866441Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-oiz","depends_on_id":"symbology-pxz","type":"blocks","created_at":"2026-02-06T21:56:01.495881794Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-pxz","title":"Complexity router for short/stable sections","description":"controls_procedures is typically very short and formulaic ('management assessed... internal controls are effective'). Running it through the full 3-stage pipeline (7 LLM calls) is wasteful. Steps: (1) Add document-length threshold check before entering pipeline, (2) For short/stable sections, route to single-pass summary instead of single -\u003e aggregate -\u003e frontpage, (3) Make threshold configurable per document type. Est. savings: eliminate ~2/3 of calls for simple sections. Files: server/symbology/worker/handlers.py, server/symbology/worker/pipeline.py","status":"closed","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-06T21:39:06.42909616Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:00:16.971860345Z","closed_at":"2026-02-06T23:00:16.971860345Z","close_reason":"Merged into symbology-ad2 — raw document diffs handle both skip-unchanged and diff-summarize cases, replacing the need for a separate complexity router","dependencies":[{"issue_id":"symbology-pxz","depends_on_id":"symbology-8eb","type":"blocks","created_at":"2026-02-06T21:43:29.503102107Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-qb1","title":"Export \u0026 Sharing","description":"Let users export and share insights. Includes: PDF report generation for individual companies or comparisons, shareable public links for specific generated content, CSV/JSON export of financial data, embeddable widget for generated insights.","status":"open","priority":2,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:01.43301258Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:01.43301258Z","dependencies":[{"issue_id":"symbology-qb1","depends_on_id":"symbology-42o","type":"parent-child","created_at":"2026-02-05T21:00:21.810000493Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-qb1","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.886036845Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-qvl","title":"Alerts \u0026 Notifications","description":"Notify users when new filings are published or when AI detects significant changes in a company's disclosures. Includes: new filing alerts, significant change detection (e.g. new risk factors), email and/or in-app notification delivery, user notification preferences.","status":"open","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:41.866321969Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:41.866321969Z","dependencies":[{"issue_id":"symbology-qvl","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:05.057685322Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-qvl","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.783213643Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-qvl","depends_on_id":"symbology-ehx","type":"blocks","created_at":"2026-02-05T21:01:39.939872226Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-qvl","depends_on_id":"symbology-byj","type":"blocks","created_at":"2026-02-05T21:01:40.096467891Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-qyh","title":"Pre-process and normalize filing text before storage","description":"Normalize filing text to reduce input tokens by 10-20%. Steps: (1) Collapse excessive whitespace and blank lines, (2) Strip residual HTML entities and formatting artifacts from EDGAR extraction, (3) Normalize Unicode characters (smart quotes, em-dashes, etc.), (4) Apply normalization in ingest_filing_documents before storing content. Files: server/symbology/ingestion/ingestion_helpers.py","status":"closed","priority":3,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:39:06.322841319Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:04:14.781443911Z","closed_at":"2026-02-06T23:04:14.781443911Z","close_reason":"Implemented normalize_filing_text utility, wired into ingestion pipeline, added 14 unit tests","dependencies":[{"issue_id":"symbology-qyh","depends_on_id":"symbology-8eb","type":"blocks","created_at":"2026-02-06T21:43:29.395516264Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-rit","title":"Watchlists \u0026 Portfolios","description":"Let users create and manage watchlists of companies they want to track. Foundation for personalized experience. Includes: create/edit/delete watchlists, add/remove companies, watchlist dashboard view showing latest insights for tracked companies.","status":"open","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T20:59:39.871885082Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T20:59:39.871885082Z","dependencies":[{"issue_id":"symbology-rit","depends_on_id":"symbology-537","type":"parent-child","created_at":"2026-02-05T21:00:02.284927874Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-rit","depends_on_id":"symbology-00n","type":"blocks","created_at":"2026-02-05T21:01:39.732343649Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-sem","title":"Strengthen the aggregate-summary prompt","description":"Currently just: 'Summarize the historical changes in these documents.' Improvements needed: (1) Specify what constitutes a meaningful 'change' (quantitative shifts, strategy pivots, new risks, discontinued segments), (2) Define output structure (chronological vs. thematic), (3) Instruct model to call out when sections are largely unchanged YoY instead of restating stable content. Reduces output variance, focuses synthesis. Files: server/prompts/aggregate-summary/prompt.md","status":"closed","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:39:00.005356161Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:45:36.832004674Z","closed_at":"2026-02-06T22:45:36.832004674Z","close_reason":"Closed"}
{"id":"symbology-t8a","title":"Skip LLM calls for already-processed documents","description":"Before calling handle_content_generation for single summaries, query for existing generated content matching the same (source_document, system_prompt, model_config) triple. If a match exists, reuse its content_hash and skip the API call. We already have content_hash on documents and generated_content_document_association — just need the pre-check in handle_full_pipeline (handlers.py ~L369-408). Est. savings: 80-100% on re-runs. Files: server/symbology/worker/handlers.py","status":"closed","priority":0,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T21:38:49.143880191Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T22:05:44.315880666Z","closed_at":"2026-02-06T22:05:44.315880666Z","close_reason":"Closed"}
{"id":"symbology-uup","title":"Restructure monorepo: src/ → server/symbology/ with clean component separation","status":"closed","priority":1,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T22:03:28.677111531Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T22:17:17.001992065Z","closed_at":"2026-02-05T22:17:17.001992065Z","close_reason":"Restructured src/ → server/symbology/ with all 180 tests passing"}
{"id":"symbology-v3q","title":"End-to-End Test Suite","description":"Build comprehensive test coverage across the stack. Includes: pytest API integration tests for all endpoints, Playwright E2E tests for critical UI flows, CI pipeline integration, test data fixtures and factories, coverage reporting with minimum threshold.","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:20.916288336Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:20.916288336Z","dependencies":[{"issue_id":"symbology-v3q","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:48.921095934Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-vje","title":"Unified search database module and API endpoint","description":"Create the search backend: database query module + FastAPI route.\n\n## Database Module (`server/symbology/database/search.py`)\n- `unified_search()` function using `websearch_to_tsquery()`\n- Per-entity subqueries with `ts_rank()` scoring and `ts_headline()` excerpts\n- Filters: entity_type, sic, form_type, document_type, date_from, date_to\n- `UNION ALL` across entities, ordered by rank, with pagination\n\n## API Route (`server/symbology/api/routes/search.py`)\n- `GET /search?q=...\u0026entity_types=...\u0026sic=...\u0026form_type=...\u0026document_type=...\u0026date_from=...\u0026date_to=...\u0026limit=20\u0026offset=0`\n- Register at `/search` in routes/__init__.py\n- Add search tag in main.py\n\n## Schemas (`server/symbology/api/schemas.py`)\n- SearchResultItem: entity_type, id, rank, headline, title, subtitle, date_value\n- SearchResponse: results[], total, query\n\n## Also update\n- `search_companies_by_query()` in companies.py to use FTS for queries \u003e= 3 chars","status":"closed","priority":1,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-06T23:53:36.630587935Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-06T23:59:10.875637196Z","closed_at":"2026-02-06T23:59:10.875637196Z","close_reason":"Search module, API route, schemas, and router registration all implemented","dependencies":[{"issue_id":"symbology-vje","depends_on_id":"symbology-jcm","type":"blocks","created_at":"2026-02-06T23:53:44.345891311Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-xf3","title":"Sector \u0026 Industry Dashboards","description":"Aggregate AI-generated insights at the sector and industry level using SIC codes. Includes: sector overview pages showing common themes and risks, industry trend detection across companies, top risks/opportunities by sector, sector-level sentiment and change indicators.","status":"open","priority":3,"issue_type":"feature","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:03.058670617Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:03.058670617Z","dependencies":[{"issue_id":"symbology-xf3","depends_on_id":"symbology-8f5","type":"parent-child","created_at":"2026-02-05T21:00:34.96492397Z","created_by":"Steven Fitzpatrick"},{"issue_id":"symbology-xf3","depends_on_id":"symbology-7nv","type":"blocks","created_at":"2026-02-05T21:01:40.245927389Z","created_by":"Steven Fitzpatrick"}]}
{"id":"symbology-y1l","title":"API Rate Limiting \u0026 Versioning","description":"Production-harden the API with rate limiting and versioning. Includes: rate limiting middleware (per-IP or per-API-key), /v1/ API prefix for versioning, API deprecation strategy, rate limit headers in responses (X-RateLimit-Remaining etc).","status":"open","priority":2,"issue_type":"task","owner":"steven@fitz.gg","created_at":"2026-02-05T21:00:15.616117782Z","created_by":"Steven Fitzpatrick","updated_at":"2026-02-05T21:00:15.616117782Z","dependencies":[{"issue_id":"symbology-y1l","depends_on_id":"symbology-2jq","type":"parent-child","created_at":"2026-02-05T21:00:47.090484819Z","created_by":"Steven Fitzpatrick"}]}
